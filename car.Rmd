---
title: "car"
author: "Carbone Giorgio, Scuri Gianluca, Gazzola Michele"
date: "12/11/2021"
output:
  html_document: default
  pdf_document: default
---

### Importazione librerie
- Importo le librerie necessarie all'esecuzione del codice
```{r importazione librerie e opzioni di rendering, include=FALSE}
library(readr)
#library(printr)
#library(lemon)
#knit_print.data.frame <- lemon_print
```

# Lettura Dataset
- Vengono assegnati i fase di lettura i tipi corretti ad ogni variabile
- Alcune variabili presentano l'unità di misura espressa nel valore, vengono
quindi temporanemanente definiti come stringhe
```{r importazione}
data_path <- "https://raw.githubusercontent.com/giocoal/datasets/main/Car%20details%20v3.csv"
car <- read_csv(data_path, col_types = 'cidiffff????i')
head(data.frame(car))
```

# Fase di osservazione del dataset
``` {r lettura}
#dim(car)
str(car, give.attr = F)
summary(car)
```
- Il dataset ha 8123 unità statistiche e 13 attributi


# Sistemo colonne
```{r sistemo colonne}
#rimuovo torque perché specifico per ogni veicolo
car <- car[,-12]

#converto da centesimi di dollaro in dollari il selling price
car$selling_price <- car$selling_price * 0.01
```

# Sistemo alcuni missing values che sono stati memorizzati come "zeri" (da mettere nella sez outlier?)
```{r from 0 to NA}
car$max_power[car$max_power == 0 | car$max_power == "bhp"] <- NA
car$mileage[car$mileage == "0.0 kmpl"] <- NA
```

# Missing Value
``` {r Missing Values}
for (i in names(car)) {
  print(i)
  print(sum(is.na(car[i])))
}

#numero di righe con almeno un NA
sum(!complete.cases(car))

#Trattandosi di 239 righe possiamo pensare di rimuoverle dato che costituiscono circa il 3% del dataset

#qui bisogna aggiungere la funzione per rimuovere le righe
car <- car[-which(!complete.cases(car)),]
```


# Verifico che le unitá di misura di ogni singolo attributo siano consistenti tra loro
```{r Controllo unita di misura}
all(grepl("kmpl", car$mileage) == !is.na(car$mileage))
#Viene FALSE perché le macchine a GPL misurano il mileage in km/kg

all(grepl("CC", car$engine) == !is.na(car$engine))
#viene TRUE quindi sono tutti consistenti

all((grepl("bhp", car$max_power)) == !is.na(car$max_power))
#viene TRUE quindi sono tutti consistenti
```

```{r test}
#strsplit("23.4   gnk", " ")
#str_extract("Camaro Z28", "[0-9]+")
#str_extract("23.5 kmpl", "^[0-9]+//.*")


```

# istogrammi e box plot
``` {r istogrammi e box plot}
#boxplot
for (i in 1:ncol(car)) {
  boxplot(car[,i], main = colnames(car)[i])
}


#istogrammi
for (i in 1:ncol(car)) {
  hist(car[,i], main = colnames(car)[i])
}
```
